<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.88.1" />
    <meta name="description" content="Xenomai 4 project">
<meta name="author" content="Philippe Gerum &lt;rpm@xenomai.org&gt;">

    <link rel="icon" href="https://the-going.github.io/website/images/favicon.png" type="image/png">

    <title>Reading clock sources :: Xenomai 4</title>

    
    <link href="https://the-going.github.io/website/css/nucleus.css?1631211181" rel="stylesheet">
    <link href="https://the-going.github.io/website/css/fontawesome-all.min.css?1631211181" rel="stylesheet">
    <link href="https://the-going.github.io/website/css/hybrid.css?1631211181" rel="stylesheet">
    <link href="https://the-going.github.io/website/css/featherlight.min.css?1631211181" rel="stylesheet">
    <link href="https://the-going.github.io/website/css/perfect-scrollbar.min.css?1631211181" rel="stylesheet">
    <link href="https://the-going.github.io/website/css/auto-complete.css?1631211181" rel="stylesheet">
    <link href="https://the-going.github.io/website/css/atom-one-dark-reasonable.css?1631211181" rel="stylesheet">
    <link href="https://the-going.github.io/website/css/theme.css?1631211181" rel="stylesheet">
    <link href="https://the-going.github.io/website/css/tabs.css?1631211181" rel="stylesheet">
    <link href="https://the-going.github.io/website/css/hugo-theme.css?1631211181" rel="stylesheet">
    
    <link href="https://the-going.github.io/website/css/theme-evl.css?1631211181" rel="stylesheet">
    
    

    <script src="https://the-going.github.io/website/js/jquery-3.3.1.min.js?1631211181"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="https://the-going.github.io/website/dovetail/porting/clocksource/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a href="https://the-going.github.io/website/"><img src="https://the-going.github.io/website/images/xenomai-logo.png"></a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="https://the-going.github.io/website/js/lunr.min.js?1631211181"></script>
<script type="text/javascript" src="https://the-going.github.io/website/js/auto-complete.js?1631211181"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/the-going.github.io\/website\/";
    
</script>
<script type="text/javascript" src="https://the-going.github.io/website/js/search.js?1631211181"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='https://the-going.github.io/website/en'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/overview/" title="Overview" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/overview/">
          &#8226; Get Started
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/core/" title="The EVL core" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/">
          &#8226; Real-time core
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/core/build-steps/" title="Building EVL" class="dd-item ">
        <a href="https://the-going.github.io/website/core/build-steps/">
        Building EVL
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/core/runtime-settings/" title="Runtime configuration" class="dd-item ">
        <a href="https://the-going.github.io/website/core/runtime-settings/">
        Runtime settings
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/core/testing/" title="Testing the installation" class="dd-item ">
        <a href="https://the-going.github.io/website/core/testing/">
        Running tests
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/core/commands/" title="" class="dd-item ">
        <a href="https://the-going.github.io/website/core/commands/">
        Commands
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/benchmarks/" title="Running benchmarks" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/benchmarks/">
          Benchmarking
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/core/caveat/" title="" class="dd-item ">
        <a href="https://the-going.github.io/website/core/caveat/">
        Caveat
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/user-api/" title="Using libevl" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/user-api/">
          &#9702; Application interface
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/core/user-api/function_index/" title="libevl function index" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/user-api/function_index/">
          Function index
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/user-api/init/" title="" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/user-api/init/">
          Initialization
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/user-api/thread/" title="" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/user-api/thread/">
          Thread
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/user-api/mutex/" title="Mutex" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/user-api/mutex/">
          Mutex
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/user-api/event/" title="" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/user-api/event/">
          Event
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/user-api/flags/" title="" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/user-api/flags/">
          Flags
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/user-api/semaphore/" title="Semaphore" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/user-api/semaphore/">
          Semaphore
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/user-api/clock/" title="" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/user-api/clock/">
          Clocks
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/user-api/timer/" title="" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/user-api/timer/">
          Timer(fd)
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/user-api/observable/" title="Observable" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/user-api/observable/">
          Observable
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/user-api/xbuf/" title="" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/user-api/xbuf/">
          Cross-buffer
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/user-api/proxy/" title="File proxy" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/user-api/proxy/">
          File proxy
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/user-api/poll/" title="Polling file descriptors" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/user-api/poll/">
          Polling file descriptors
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/user-api/io/" title="Out-of-band I/O services" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/user-api/io/">
          Out-of-band I/O services
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/user-api/scheduling/" title="" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/user-api/scheduling/">
          Scheduling
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/user-api/heap/" title="" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/user-api/heap/">
          Memory heap
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/user-api/tube/" title="" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/user-api/tube/">
          Tube
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/user-api/misc/" title="Miscellanea" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/user-api/misc/">
          Misc. services
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/core/user-api/api-revs/" title="API revisions" class="dd-item ">
        <a href="https://the-going.github.io/website/core/user-api/api-revs/">
        API revisions
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/oob-drivers/" title="Real-time I/O drivers" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/oob-drivers/">
          &#9702; Real-time I/O drivers
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/core/oob-drivers/dma/" title="DMA" class="dd-item ">
        <a href="https://the-going.github.io/website/core/oob-drivers/dma/">
        DMA
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/core/oob-drivers/spi/" title="SPI" class="dd-item ">
        <a href="https://the-going.github.io/website/core/oob-drivers/spi/">
        SPI
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/core/oob-drivers/gpio/" title="GPIO" class="dd-item ">
        <a href="https://the-going.github.io/website/core/oob-drivers/gpio/">
        GPIO
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/kernel-api/" title="Writing drivers" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/kernel-api/">
          &#9702; Writing drivers
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/core/kernel-api/function_index/" title="Kernel function index" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/kernel-api/function_index/">
          Function index
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/kernel-api/file/" title="File description" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/kernel-api/file/">
          File description
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/kernel-api/socket/" title="Socket interface" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/kernel-api/socket/">
          Socket interface
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/kernel-api/kthread/" title="Kernel thread" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/kernel-api/kthread/">
          Kernel thread
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/kernel-api/wait/" title="Wait queue" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/kernel-api/wait/">
          Wait queue
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/kernel-api/mutex/" title="Kernel mutex" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/kernel-api/mutex/">
          Kernel mutex
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/kernel-api/semaphore/" title="Kernel semaphore" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/kernel-api/semaphore/">
          Kernel semaphore
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/kernel-api/flag/" title="Kernel flag" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/kernel-api/flag/">
          Kernel flag
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/kernel-api/spinlock/" title="EVL Spinlock" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/kernel-api/spinlock/">
          EVL Spinlock
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/kernel-api/clock/" title="" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/kernel-api/clock/">
          Clock device
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/kernel-api/timer/" title="Timer" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/kernel-api/timer/">
          Timer
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/kernel-api/xbuf/" title="Cross-buffer access" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/kernel-api/xbuf/">
          Cross-buffer access
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/kernel-api/interrupts/" title="Managing IRQs" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/kernel-api/interrupts/">
          Managing IRQs
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/kernel-api/stax/" title="Stage exclusion lock" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/kernel-api/stax/">
          Stage exclusion lock
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/core/under-the-hood/" title="Under the hood" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/core/under-the-hood/">
          &#9702; Under the hood
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/core/under-the-hood/abi/" title="The EVL ABI" class="dd-item ">
        <a href="https://the-going.github.io/website/core/under-the-hood/abi/">
        ABI revisions
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/core/abi-revs/" title="ABI revisions" class="dd-item ">
        <a href="https://the-going.github.io/website/core/abi-revs/">
        ABI revisions
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/dovetail/" title="Dovetail interface" class="dd-item
        parent
        
        
        ">
      <a href="https://the-going.github.io/website/dovetail/">
          &#8226; Dovetail interface
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/dovetail/pipeline/" title="Interrupt pipeline" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/dovetail/pipeline/">
          &#9702; Interrupt pipeline
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/dovetail/pipeline/irq_handling/" title="IRQ handling" class="dd-item ">
        <a href="https://the-going.github.io/website/dovetail/pipeline/irq_handling/">
        IRQ handling
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dovetail/pipeline/synthetic/" title="Synthetic IRQs" class="dd-item ">
        <a href="https://the-going.github.io/website/dovetail/pipeline/synthetic/">
        Synthetic IRQs
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dovetail/pipeline/pipeline_inject/" title="IRQ injection" class="dd-item ">
        <a href="https://the-going.github.io/website/dovetail/pipeline/pipeline_inject/">
        IRQ injection
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dovetail/pipeline/interrupt_protection/" title="Interrupt protection" class="dd-item ">
        <a href="https://the-going.github.io/website/dovetail/pipeline/interrupt_protection/">
        Interrupt protection
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dovetail/pipeline/stage_push/" title="Installing the out-of-band stage" class="dd-item ">
        <a href="https://the-going.github.io/website/dovetail/pipeline/stage_push/">
        OOB stage installation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dovetail/pipeline/stage_escalation/" title="Stage escalation" class="dd-item ">
        <a href="https://the-going.github.io/website/dovetail/pipeline/stage_escalation/">
        Stage escalation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dovetail/pipeline/locking/" title="Locking" class="dd-item ">
        <a href="https://the-going.github.io/website/dovetail/pipeline/locking/">
        Locking
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/dovetail/porting/" title="Porting Dovetail" class="dd-item
        parent
        
        
        ">
      <a href="https://the-going.github.io/website/dovetail/porting/">
          &#9702; Porting Dovetail
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/dovetail/porting/prerequisites/" title="Prerequisites" class="dd-item ">
        <a href="https://the-going.github.io/website/dovetail/porting/prerequisites/">
        Prerequisites
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dovetail/porting/irqflow/" title="Interrupt flow" class="dd-item ">
        <a href="https://the-going.github.io/website/dovetail/porting/irqflow/">
        Interrupt flow
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dovetail/porting/atomic/" title="Atomic operations" class="dd-item ">
        <a href="https://the-going.github.io/website/dovetail/porting/atomic/">
        Atomic operations
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dovetail/porting/arch/" title="Architecture-specific bits" class="dd-item ">
        <a href="https://the-going.github.io/website/dovetail/porting/arch/">
        Architecture bits
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dovetail/porting/timer/" title="Tick devices" class="dd-item ">
        <a href="https://the-going.github.io/website/dovetail/porting/timer/">
        Tick devices
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dovetail/porting/clocksource/" title="Reading clock sources" class="dd-item active">
        <a href="https://the-going.github.io/website/dovetail/porting/clocksource/">
        Clock sources
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dovetail/porting/syscall/" title="Syscall path" class="dd-item ">
        <a href="https://the-going.github.io/website/dovetail/porting/syscall/">
        Syscall path
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dovetail/porting/rawprintk/" title="Raw printk support" class="dd-item ">
        <a href="https://the-going.github.io/website/dovetail/porting/rawprintk/">
        Serial debugging
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dovetail/porting/misc/" title="Misc" class="dd-item ">
        <a href="https://the-going.github.io/website/dovetail/porting/misc/">
        Misc
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dovetail/porting/devnotes/" title="Developer&#39;s Notes" class="dd-item ">
        <a href="https://the-going.github.io/website/dovetail/porting/devnotes/">
        Developer&#39;s Notes
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dovetail/altsched/" title="Alternate scheduling" class="dd-item ">
        <a href="https://the-going.github.io/website/dovetail/altsched/">
        Alternate scheduling
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dovetail/files/" title="File tracking" class="dd-item ">
        <a href="https://the-going.github.io/website/dovetail/files/">
        File tracking
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dovetail/sockets/" title="Socket handling" class="dd-item ">
        <a href="https://the-going.github.io/website/dovetail/sockets/">
        Socket handling
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/dovetail/rulesofthumb/" title="Rules Of Thumb" class="dd-item ">
        <a href="https://the-going.github.io/website/dovetail/rulesofthumb/">
        Rules Of Thumb
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ports/" title="Status of EVL ports" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/ports/">
          &#8226; Ports
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/contributing/" title="Contributing to Xenomai 4" class="dd-item
        
        
        
        ">
      <a href="https://the-going.github.io/website/contributing/">
          &#8226; Contributing
          
      </a>
      
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3></h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://the-going.github.io/website/"><i class='fas fa-home'></i> Home</a>
              </li>
          
              <li>
                  <a class="padding" href="https://riot.im/app/#/room/#evlproject:matrix.org/"><i class='fas fa-comments'></i> RIOT channel</a>
              </li>
          
              <li>
                  <a class="padding" href="https://xenomai.org/mailman/listinfo/xenomai/"><i class='fas fa-comment-dots'></i> Mailing list</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="https://the-going.github.io/website/dovetail/porting/clocksource/" selected>English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="ru" value="https://the-going.github.io/website/ru/dovetail/porting/clocksource/">Русский</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      

      
      </ul>
    </section>
    
    <section id="footer">
      

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='https://the-going.github.io/website/'>Xenomai 4</a> > <a href='https://the-going.github.io/website/dovetail/'>Dovetail interface</a> > <a href='https://the-going.github.io/website/dovetail/porting/'>Porting Dovetail</a> > Reading clock sources
          
        
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#time-vdso-access">Reading timestamps via the vDSO in a nutshell</a></li>
        <li><a href="#the-arm-_situation_">The ARM <em>situation</em></a></li>
        <li><a href="#generic-clocksource-vdso">The generic vDSO and USER_MMIO clock sources</a></li>
        <li><a href="#example-converting-the-omap2-gp-timer">Example: converting the OMAP2 GP-timer</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Reading clock sources
            </h1>
          

        


<p>Your autonomous core most likely needs a fast access to the current
clock source from the out-of-band context, for reading precise
timestamps which are in sync with the kernel&rsquo;s idea of time. The best
way to achieve this is by enabling the fast
<a href="http://man7.org/linux/man-pages/man3/clock_gettime.3.html">clock_gettime(3)</a>
helper in the <a href="https://lwn.net/Articles/615809/">vDSO support</a> for the
target CPU architecture. At least, you may want user-space tasks
controlled by the core to have access to the POSIX-defined
<code>CLOCK_MONOTONIC</code> and <code>CLOCK_REALTIME</code> clocks from the out-of-band
context, using a vDSO call, with no execution and response time
penalty involved in invoking an [in-band syscall] (/dovetail/altsched/#inband-switch).</p>
<h3 id="time-vdso-access">Reading timestamps via the vDSO in a nutshell</h3>
<p>Basically, A vDSO-based
<a href="http://man7.org/linux/man-pages/man3/clock_gettime.3.html">clock_gettime(3)</a>
implementation wants to read from non-privileged CPU mode the same
monotonic hardware counter which is currently used by the kernel for
timekeeping, before converting the count to nanoseconds. In other
words, this implementation should mirror the kernel
<a href="https://www.kernel.org/doc/Documentation/timers/timekeeping.txt">clocksource</a>
behavior. However, it should do so relying exclusively on resources
which may be accessed from user mode, since the vDSO code segment
containing this helper is merely a kernel-defined extension of the
application code running in non-privileged mode. In order to perform
such conversion, the vDSO code also needs additional timekeeping
information maintained by the kernel, which it usually gets from a
small data segment the kernel maps into every application as part of
the vDSO support (see the various <em>update_vsyscall()</em> implementations
for more on this).</p>
<p>There are two common ways of reading the hardware counter used for
timekeeping by the kernel from a non-privileged environement:</p>
<ul>
<li>
<p>either by reading some non-privileged on-chip register
(e.g. <em>powerpc</em>&rsquo;s timebase register, or <em>x86</em>&rsquo;s TSC register).</p>
</li>
<li>
<p>or by reading a memory-mapped counter, from a memory mapping the
calling application has access to.</p>
</li>
</ul>
<h3 id="the-arm-_situation_">The ARM <em>situation</em></h3>
<p>For several CPU architectures Linux supports, reading the
CLOCK_MONOTONIC and CLOCK_REALTIME clocks is already possible via vDSO
calls, including from tasks <a href="https://the-going.github.io/website/dovetail/altsched/#altsched-theory">running out-of-band</a> without incurring
any <a href="https://the-going.github.io/website/dovetail/altsched/#stage-migration">execution stage switch</a>.</p>
<p>For ARM, the situation is clumsy: the mainline kernel implementation
supports reading timestamps directly from the vDSO <strong>only</strong> for the
so-called <em>architected timer</em> the armv8 specification requires from
compliant CPUs. With CPUs following an earlier specification, a
truckload of different hardware chips may be used for that purpose
instead, which the vDSO implementation does not provide any support
for. Sometimes, the architected timer is present but not usable for
timekeeping duties because of firmware issues. In these cases, a plain
in-band system call would be issued whenever the vDSO-based
<a href="http://man7.org/linux/man-pages/man3/clock_gettime.3.html">clock_gettime(3)</a>
is called from an application, which would be a showstopper for
keeping the response time short and bounded.</p>
<h3 id="generic-clocksource-vdso">The generic vDSO and USER_MMIO clock sources</h3>
<p>If your target kernel supports the generic vDSO implementation
(CONFIG_HAVE_GENERIC_VDSO), Dovetail already provides the core support
for accessing MMIO-based clock sources from the vDSO, which is
essentially part of the application context:</p>
<ul>
<li>
<p>firstly, it extends the <em>clocksource_mmio</em> semantics with the
MMIO-accessed clock sources mapped to user space aka <em>struct
clocksource_user_mmio</em>, implemented in <code>drivers/clocksource/mmio.c</code>,
which we call USER_MMIO for short in this document.  In essence, a
USER_MMIO clock source is a MMIO-based clock source which any
application may map into its own address space, so that it can read
the hardware counter directly. Specifically, the MMIO space covering
the hardware counter register(s) is mapped into the caller&rsquo;s address
space.</p>
</li>
<li>
<p>Secondly, Dovetail extends the generic vDSO implementation in
<code>lib/vdso.c</code> and <code>kernel/time/vsyscall.c</code> in order to make USER_MMIO
clock sources visible to applications, in addition to the architected
timer if present.</p>
</li>
<li>
<p>Finally, Dovetail converts some MMIO clock sources to USER_MMIO
clock sources, such as the OMAP2 general-purpose timer, the ARM global
timer counter and the DesignWare APB timer. More conversions will come
over time, as Dovetail is ported to a broader range of hardware.</p>
</li>
</ul>

<div class="notices note" ><p>The mapping operation happens once in a process lifetime, during the
very first call to <a href="http://man7.org/linux/man-pages/man3/clock_gettime.3.html">clock_gettime(3)</a>
issued by the application. Since this involves running in-band code for
updating the caller&rsquo;s address space, this particular call gives absolutely
<strong>no</strong> response time guarantee. So it&rsquo;s good practice to force an initial
dummy call to <a href="http://man7.org/linux/man-pages/man3/clock_gettime.3.html">clock_gettime(3)</a>
from the library code which initializes the
interface between applications and your autonomous core (i.e. some
user-space library which implements the out-of-band system calls
wrappers to send requests to this core). For EVL, this is done in
<a href="https://the-going.github.io/website/core/user-api/">libevl</a>.</p>
</div>

<h4 id="enabling-mmio-clocksource">Making a MMIO clock source accessible from the vDSO</h4>
<p>If you need to convert an existing MMIO clock source to a
user-mappable one visible from the generic vDSO, you can follow this
three-step process:</p>
<ul>
<li>
<p>in the Kconfig stanza enabling the clock source, select
<code>[CONFIG_]GENERIC_CLOCKSOURCE_VDSO</code> in the dependency list to
compile the required support in the generic vDSO code, which in turn
selects the USER_MMIO support it depends on.</p>
</li>
<li>
<p>in the clock source implementation, convert the <em>struct clocksource</em>
descriptor to a <em>struct clocksource_user_mmio</em> descriptor. The
original <em>struct clocksource</em> object is now available as a member of
the <em>struct clocksource_user_mmio</em> descriptor, so you may have to
move the original initializers accordingly. You also need to fix up
the clock source&rsquo;s <code>.read()</code> handler, changing it to one of the
helpers <em>clocksource_user_mmio</em> knows about. Do <em>not</em> use any
other helper outside of the following set, or you would receive
-EINVAL from <code>clocksource_user_mmio_init()</code>:</p>
<ul>
<li>
<p><code>clocksource_mmio_readl_up()</code>, for reading a 32bit count-up
register (i.e. <em>reg_higher</em> is NULL in <em>clocksource_mmio_regs</em>
as described below).</p>
</li>
<li>
<p><code>clocksource_mmio_readl_down()</code>, for reading a 32bit count-down
register.</p>
</li>
<li>
<p><code>clocksource_mmio_readw_up()</code>, for reading a 16bit count-up
register.</p>
</li>
<li>
<p><code>clocksource_mmio_readw_down()</code>, for reading a 16bit count-down
register.</p>
</li>
<li>
<p><code>clocksource_dual_mmio_readl_up()</code>, for reading a count-up counter
composed of two 32bit registers (i.e. both <em>reg_lower</em> and
<em>reg_higher</em> must be valid in <em>clocksource_mmio_regs</em> as
described below).</p>
</li>
<li>
<p><code>clocksource_dual_mmio_readl_down()</code>, for reading a count-down
counter composed of two 32bit registers.</p>
</li>
</ul>
</li>
</ul>

<div class="notices warning" ><p>Only continuous clock sources can be converted to
<em>clocksource_user_mmio</em>, otherwise the registration fails with
-EINVAL in <code>clocksource_user_mmio_init()</code>. Therefore, only clock
sources originally bearing the <code>CLOCK_SOURCE_IS_CONTINUOUS</code> flag can
be converted.</p>
</div>

<ul>
<li>
<p>eventually, substitute the call to <code>clocksource_register_hz()</code> by a
call to <code>clocksource_user_mmio_init()</code> instead. This function takes
the following arguments:</p>
<ul>
<li>
<p>the USER_MMIO descriptor address</p>
</li>
<li>
<p>the address of a <em>clocksource_mmio_regs</em> structure which defines
the method and parameters for reading the hardware counter.  Such
counter can be represented by up to two 32bit MMIO registers,
making a 64bit value. A lower precision is acceptable too, the
vDSO code deals with wrapping as needed. However, the higher the
precision, the better the accuracy for applications. The
<em>clocksource_mmio_regs</em> structure should be filled with the
following information:</p>
<pre><code> - _reg\_lower_ is the **virtual** address of the counter's
   low 32bit register. This address was most likely obtained
   from `ioremap()` in the original clock source driver code;
   it cannot be NULL.
</code></pre>
<ul>
<li>
<p><em>bits_lower</em> is a bitmask defining the significant bits to
read from the low register, starting from the low order
bit. For instance, if the first 31 bits only are
significant, 0x7fffffff should be passed.</p>
</li>
<li>
<p><em>reg_higher</em> is the <strong>virtual</strong> address of the counter&rsquo;s
high register. This address can be NULL if the hardware
counter is only 32bit wide or less, in which case
<em>bits_higher</em> is ignored too.</p>
</li>
<li>
<p><em>bits_higher</em> is a bitmask defining the significant bits to read
from the high register.</p>
</li>
<li>
<p><em>revmap</em> is a reverse mapping helper, for resolving the
physical address of the low and high registers mentioned
above, based on the virtual address passed in <em>reg_lower</em>
and <em>reg_higher</em>. If <em>revmap</em> is NULL,
<code>clocksource_user_mmio_init()</code> tries to figure this out by
resolving the address of the containing memory frame via a
call to <code>find_vma()</code>, which is usually fine. If this
resolution should be done in a different way, you should
specify your own handler in <em>revmap</em>, which receives the
<strong>virtual</strong> address to resolve, and should return the
corresponding physical address, or zero upon failure.</p>
</li>
</ul>
</li>
<li>
<p>the hardware clock rate that was originally passed to
<code>clocksource_register_hz()</code>.</p>
</li>
</ul>
</li>
</ul>
<h3 id="example-converting-the-omap2-gp-timer">Example: converting the OMAP2 GP-timer</h3>
<p>The Beaglebone Black is an AM335X processor equipped with a Cortex A8
CPU, therefore no ARM architected timer is available. Instead, Linux
runs one of the available general purpose timers on this platform for
timekeeping purpose. The clock source driver for such devices is
implemented in <code>arch/arm/mach-omap2/timer.c</code>. The patch below
illustrates the changes Dovetail introduces to convert this clock
source to a user-mappable one, which the ARM vDSO implementation can
use.</p>
<pre tabindex="0"><code>--- a/arch/arm/mach-omap2/Kconfig
+++ b/arch/arm/mach-omap2/Kconfig
@@ -96,6 +96,7 @@ config ARCH_OMAP2PLUS
 	select ARCH_HAS_HOLES_MEMORYMODEL
 	select ARCH_OMAP
 	select CLKSRC_MMIO
+	select GENERIC_CLOCKSOURCE_VDSO
 	select GENERIC_IRQ_CHIP
 	select GPIOLIB
 	select MACH_OMAP_GENERIC
diff --git a/arch/arm/mach-omap2/timer.c b/arch/arm/mach-omap2/timer.c
index 69c3a6d94933..bc7d177759c3 100644
--- a/arch/arm/mach-omap2/timer.c
+++ b/arch/arm/mach-omap2/timer.c
@@ -413,17 +413,14 @@ static bool use_gptimer_clksrc __initdata;
 /*
  * clocksource
  */
-static u64 clocksource_read_cycles(struct clocksource *cs)
-{
-	return (u64)__omap_dm_timer_read_counter(&amp;clksrc,
-						     OMAP_TIMER_NONPOSTED);
-}
 
-static struct clocksource clocksource_gpt = {
-	.rating		= 300,
-	.read		= clocksource_read_cycles,
-	.mask		= CLOCKSOURCE_MASK(32),
-	.flags		= CLOCK_SOURCE_IS_CONTINUOUS,
+static struct clocksource_user_mmio clocksource_gpt = {
+	.mmio.clksrc = {
+		.rating		= 300,
+		.read		= clocksource_mmio_readl_up,
+		.mask		= CLOCKSOURCE_MASK(32),
+		.flags		= CLOCK_SOURCE_IS_CONTINUOUS,
+	},
 };
 
 static u64 notrace dmtimer_read_sched_clock(void)
@@ -505,21 +502,22 @@ static void __init omap2_gptimer_clocksource_init(int gptimer_id,
 						  const char *fck_source,
 						  const char *property)
 {
+	struct clocksource_mmio_regs mmr;
 	int res;
 
 	clksrc.id = gptimer_id;
 	clksrc.errata = omap_dm_timer_get_errata();
 
 	res = omap_dm_timer_init_one(&amp;clksrc, fck_source, property,
-				     &amp;clocksource_gpt.name,
+				     &amp;clocksource_gpt.mmio.clksrc.name,
 				     OMAP_TIMER_NONPOSTED);
 
 	if (soc_is_am43xx()) {
-		clocksource_gpt.suspend = omap2_gptimer_clksrc_suspend;
-		clocksource_gpt.resume = omap2_gptimer_clksrc_resume;
+		clocksource_gpt.mmio.clksrc.suspend = omap2_gptimer_clksrc_suspend;
+		clocksource_gpt.mmio.clksrc.resume = omap2_gptimer_clksrc_resume;
 
 		clocksource_gpt_hwmod =
-			omap_hwmod_lookup(clocksource_gpt.name);
+			omap_hwmod_lookup(clocksource_gpt.mmio.clksrc.name);
 	}
 
 	BUG_ON(res);
@@ -529,12 +527,18 @@ static void __init omap2_gptimer_clocksource_init(int gptimer_id,
 				   OMAP_TIMER_NONPOSTED);
 	sched_clock_register(dmtimer_read_sched_clock, 32, clksrc.rate);
 
-	if (clocksource_register_hz(&amp;clocksource_gpt, clksrc.rate))
+	mmr.reg_lower = clksrc.func_base + (OMAP_TIMER_COUNTER_REG &amp; 0xff);
+	mmr.bits_lower = 32;
+	mmr.reg_upper = 0;
+	mmr.bits_upper = 0;
+	mmr.revmap = NULL;
+
+	if (clocksource_user_mmio_init(&amp;clocksource_gpt, &amp;mmr, clksrc.rate))
 		pr_err(&quot;Could not register clocksource %s\n&quot;,
-			clocksource_gpt.name);
+			clocksource_gpt.mmio.clksrc.name);
 	else
 		pr_info(&quot;OMAP clocksource: %s at %lu Hz\n&quot;,
-			clocksource_gpt.name, clksrc.rate);
+			clocksource_gpt.mmio.clksrc.name, clksrc.rate);
 }
</code></pre>
<div class="notices tip" ><p>In some rare cases, converting the available clocksource(s) so that we
can read them directly from the vDSO might not be an option, typically
because reading them would require supervisor privileges in the CPU,
which the vDSO context excludes by definition.  For these almost desperate
situations, there is still the option for your companion core to
<a href="https://the-going.github.io/website/dovetail/altsched/#syscall-events">intercept system calls</a> to
<a href="http://man7.org/linux/man-pages/man3/clock_gettime.3.html">clock_gettime(3)</a>
from the out-of-band handler, handling them directly from that spot.
This would be slower compared to a direct readout from the
vDSO, but the core would manage to get timestamps for <code>CLOCK_MONOTONIC</code>
and <code>CLOCK_REALTIME</code> clocks at least without involving the in-band stage.
EVL solves a limitation with clock sources on <a href="https://the-going.github.io/website/core/caveat/#x86-caveat">legacy x86
hardware</a> this way.</p>
</div>

<hr>
<p style="text-align:right">Last modified: Mon, 01 Jun 2020 19:30:22 &#43;0200</p>



<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="https://the-going.github.io/website/dovetail/porting/timer/" title="Tick devices"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="https://the-going.github.io/website/dovetail/porting/syscall/" title="Syscall path" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="https://the-going.github.io/website/js/clipboard.min.js?1631211181"></script>
    <script src="https://the-going.github.io/website/js/perfect-scrollbar.min.js?1631211181"></script>
    <script src="https://the-going.github.io/website/js/perfect-scrollbar.jquery.min.js?1631211181"></script>
    <script src="https://the-going.github.io/website/js/jquery.sticky.js?1631211181"></script>
    <script src="https://the-going.github.io/website/js/featherlight.min.js?1631211181"></script>
    <script src="https://the-going.github.io/website/js/highlight.pack.js?1631211181"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://the-going.github.io/website/js/modernizr.custom-3.6.0.js?1631211181"></script>
    <script src="https://the-going.github.io/website/js/learn.js?1631211181"></script>
    <script src="https://the-going.github.io/website/js/hugo-learn.js?1631211181"></script>
    
        
            <script src="https://the-going.github.io/website/mermaid/mermaid.js?1631211181"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    
  </body>
</html>

